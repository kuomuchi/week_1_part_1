<html>
  <!-- <link href="css/signin.css" rel="stylesheet"> -->
  <link href="/admin/css/signin.css" rel="stylesheet">
  <title>還敢登入啊！ㄅ！</title>
  <body>
    <div class="signin-box">
      <h2>Login you tree not fish!!</h2>
      <p>UserName</p>
      <input type="text" name="username" id="name">
      <p>Email</p>
      <input type="text" name="email" id="email">
      <p>Password</p>
      <input type="text" name="password" id="password">
      <br><br>
      <button onclick="sendAjax()">login</button>
    </div>

    <div class="signup-box">
      <div>
        <a href="/api/1.0/user/signup" id="signup-text">don't have account? <br>signip!</a>
      </div>
    </div>
  </body>
  <script>
    
    function sendAjax(){

      const test = {
        "name": document.getElementById('name').value,
        "email": document.getElementById('email').value,
        "password": document.getElementById('password').value
      }

      let userData = JSON.stringify(test); //問題4你!

      var xhr = new XMLHttpRequest();
      xhr.open('POST', "http://3.13.254.132/api/1.0/user/signin");
      xhr.setRequestHeader('Content-type', 'application/json');
      xhr.onreadystatechange = function(){
        if(xhr.readyState == 4 && xhr.status == 200){
          var str = xhr.responseText;
          str = JSON.stringify(str);
          str = JSON.parse(str);
          window.localStorage.setItem('access_token', str['data']['access_token']); 
        }
      }
      xhr.send(userData);
  }
  </script>
</html>